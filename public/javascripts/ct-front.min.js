$(document).ready(function(){var t=[],e=null;$("#excId").change(function(){var t=$(this).val();t.length>0?$.getJSON("/"+t,function(t){$("#mktId").children().remove().end().append('<option value="">Mercado...</option>'),$.each(t,function(t,e){$("#mktId").append('<option value="'+e.name+'">'+e.name+"</option>")}),$("#mktId").prop("disabled",!1)}):($("#mktId").children().remove().end().append('<option value="">Mercado...</option>'),$("#mktId").prop("disabled",!0),$("#cndlId").val(""),$("#cndlId").prop("disabled",!0))}),$("#mktId").change(function(){$("#cndlId").val("");var t=$("#excId").val(),e=$(this).val();0==t.length||0==e.length?$("#cndlId").prop("disabled",!0):$("#cndlId").prop("disabled",!1)}),$("#cndlId").change(function(){var d=$("#excId").val(),o=$("#mktId").val(),n=$(this).val();$("#chartId").empty(),t=[],d.length>0&&o.length>0&&n.length>0&&$.getJSON("/"+d+"/"+o+"/"+n,function(r){for(var l=1,a=0,i=0,l=70;l<r.length;l++)a>r[l].lowest&&(a=r[l].lowest),i<r[l].highest&&(i=r[l].highest),t.push([r[l].collectedTime,r[l].opening,r[l].highest,r[l].lowest,r[l].closure]);e&&e.destroy(),e=$.jqplot("chartId",[t],{title:d+" - "+o+" ("+n+")",axesDefaults:{},axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,tickOptions:{angle:-30},numberTicks:20},yaxis:{tickOptions:{prefix:"$",angle:-30}}},cursor:{zoom:!0,looseZoom:!0},seriesDefaults:{rendererOptions:{smooth:!0}},series:[{renderer:$.jqplot.OHLCRenderer,rendererOptions:{candleStick:!0}}],cursor:{showTooltip:!0},highlighter:{show:!0,showMarker:!1,tooltipAxes:"xy",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:</td><td>%s</td></tr><tr><td>open:</td><td>%s</td></tr><tr><td>hi:</td><td>%s</td></tr><tr><td>low:</td><td>%s</td></tr><tr><td>close:</td><td>%s</td></tr></table>'}})})}),$(document).ajaxError(function(t,e,d,o){})});